import{_ as D,o as E,a as o,c,b as t,F as f,r as y,g as C,f as b,h as p,i,j as M,t as a,d as r,w as u,e as d,n as R}from"./index-BOupgZvc.js";import{g as G,a as J}from"./article-DBlYbpKZ.js";import{g as K}from"./category-DCVvt8l0.js";import{g as O}from"./tag-BgUr4tH5.js";import"./request-sz1W-oIh.js";const Q={class:"py-6 md:py-8"},W={class:"flex flex-col lg:flex-row gap-6"},X={class:"flex-1 min-w-0"},Y={class:"space-y-4"},Z=["onClick"],ee={key:0,class:"w-full md:w-60 flex-shrink-0"},te=["src"],se={class:"flex-1 p-4 md:p-5"},ae={class:"text-lg font-medium mb-2",style:{color:"var(--text-primary)"}},oe={class:"text-sm mb-3 line-clamp-2",style:{color:"var(--text-secondary)"}},re={class:"flex flex-wrap items-center gap-3 text-xs",style:{color:"var(--text-tertiary)"}},le={class:"flex items-center gap-1"},ne={class:"flex items-center gap-1"},ce={class:"flex items-center gap-1"},ie={class:"flex items-center gap-1"},de={class:"w-full lg:w-70 flex-shrink-0 space-y-5"},ue={class:"card"},pe={class:"space-y-2"},_e={class:"text-xs",style:{color:"var(--text-tertiary)"}},me={class:"card"},fe={class:"space-y-3"},ye={class:"text-xs flex items-center gap-0.5 flex-shrink-0",style:{color:"var(--text-tertiary)"}},ge={class:"card"},ve={class:"flex flex-wrap gap-2"},xe={__name:"List",setup(he){const _=M(),g=p([]),z=p([]),$=p([]),A=p([]),v=p(0),x=p(1),h=p(10),w=async()=>{try{const s=await G({page:x.value,size:h.value,categoryId:_.params.id?Number(_.params.id):null,tagId:_.params.id?Number(_.params.id):null,keyword:_.query.keyword||""});g.value=s.data.records||[],v.value=s.data.total||0}catch(s){console.error("获取文章列表失败:",s)}},V=async()=>{try{const s=await K();z.value=s.data||[]}catch(s){console.error("获取分类失败:",s)}},I=async()=>{try{const s=await O();$.value=s.data||[]}catch(s){console.error("获取标签失败:",s)}},B=async()=>{try{const s=await J({limit:10});A.value=s.data||[]}catch(s){console.error("获取热门文章失败:",s)}};return E(()=>{w(),V(),I(),B()}),(s,l)=>{const T=i("el-avatar"),F=i("Calendar"),m=i("el-icon"),L=i("View"),H=i("Star"),P=i("el-empty"),U=i("el-pagination"),j=i("router-link"),q=i("el-tag");return o(),c("div",Q,[t("div",W,[t("div",X,[t("div",Y,[(o(!0),c(f,null,y(g.value,e=>{var n,N;return o(),c("div",{key:e.id,class:"card flex flex-col md:flex-row overflow-hidden cursor-pointer hover:shadow-md transition-shadow duration-200",onClick:k=>s.$router.push(`/article/${e.id}`)},[e.coverImage?(o(),c("div",ee,[t("img",{src:e.coverImage,alt:"封面",class:"w-full h-40 md:h-full object-cover"},null,8,te)])):b("",!0),t("div",se,[t("h3",ae,a(e.title),1),t("p",oe,a(e.summary),1),t("div",re,[t("span",le,[r(T,{size:20,src:(n=e.author)==null?void 0:n.avatar},{default:u(()=>{var k,S;return[d(a((S=(k=e.author)==null?void 0:k.nickname)==null?void 0:S.charAt(0)),1)]}),_:2},1032,["src"]),d(" "+a((N=e.author)==null?void 0:N.nickname),1)]),t("span",ne,[r(m,null,{default:u(()=>[r(F)]),_:1}),d(" "+a(e.createTime),1)]),t("span",ce,[r(m,null,{default:u(()=>[r(L)]),_:1}),d(" "+a(e.viewCount),1)]),t("span",ie,[r(m,null,{default:u(()=>[r(H)]),_:1}),d(" "+a(e.likeCount),1)])])])],8,Z)}),128))]),g.value.length===0?(o(),C(P,{key:0,description:"暂无文章",class:"py-12"})):b("",!0),v.value>0?(o(),C(U,{key:1,"current-page":x.value,"onUpdate:currentPage":l[0]||(l[0]=e=>x.value=e),"page-size":h.value,"onUpdate:pageSize":l[1]||(l[1]=e=>h.value=e),total:v.value,"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next, jumper",class:"flex justify-center mt-8",onCurrentChange:w,onSizeChange:w},null,8,["current-page","page-size","total"])):b("",!0)]),t("aside",de,[t("div",ue,[l[2]||(l[2]=t("h4",{class:"font-medium mb-3",style:{color:"var(--text-primary)"}},"分类",-1)),t("ul",pe,[(o(!0),c(f,null,y(z.value,e=>(o(),c("li",{key:e.id,class:"flex items-center justify-between py-1.5 px-2 rounded text-sm",style:{color:"var(--text-secondary)"}},[r(j,{to:`/category/${e.id}`,class:"hover:text-blue-500 transition-colors"},{default:u(()=>[d(a(e.name),1)]),_:2},1032,["to"]),t("span",_e,a(e.articleCount||0),1)]))),128))])]),t("div",me,[l[3]||(l[3]=t("h4",{class:"font-medium mb-3",style:{color:"var(--text-primary)"}},"热门文章",-1)),t("ul",fe,[(o(!0),c(f,null,y(A.value,(e,n)=>(o(),c("li",{key:e.id,class:"flex items-start gap-2"},[t("span",{class:R(["flex-shrink-0 w-5 h-5 rounded text-xs flex items-center justify-center font-medium",[n===0?"bg-red-500 text-white":"",n===1?"bg-orange-400 text-white":"",n===2?"bg-yellow-400 text-white":"",n>2?"bg-gray-200 text-gray-500 dark:bg-gray-600 dark:text-gray-300":""]])},a(n+1),3),r(j,{to:`/article/${e.id}`,class:"flex-1 text-sm truncate",style:{color:"var(--text-secondary)"}},{default:u(()=>[d(a(e.title),1)]),_:2},1032,["to"]),t("span",ye,[r(m,null,{default:u(()=>[r(L)]),_:1}),d(" "+a(e.viewCount),1)])]))),128))])]),t("div",ge,[l[4]||(l[4]=t("h4",{class:"font-medium mb-3",style:{color:"var(--text-primary)"}},"标签",-1)),t("div",ve,[(o(!0),c(f,null,y($.value,e=>(o(),C(q,{key:e.id,size:"small",class:"cursor-pointer",onClick:n=>s.$router.push(`/tag/${e.id}`)},{default:u(()=>[d(a(e.name),1)]),_:2},1032,["onClick"]))),128))])])])])])}}},$e=D(xe,[["__scopeId","data-v-109f0f32"]]);export{$e as default};
